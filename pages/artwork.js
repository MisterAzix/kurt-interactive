import { useRef, useState } from "react";
import { Container } from "../shared/styles";
import styled from "@emotion/styled";
import { css } from "@emotion/react";
import { motion } from "framer-motion";
import html2canvas from "html2canvas";
import axios from "axios";
import Link from "next/link";

import { useInventoryContext } from "../lib/context";

import Header from "../components/Header";
import PostIt from "../components/PostIt";
import Button from "../components/Button";
import DrawingSelector from "../components/DrawingSelector";
import Tube from "../drawings/Tube";
import Tube2 from "../drawings/Tube2";
import Scheme from "../drawings/Scheme";
import Pencil2 from "../drawings/Pencil2";
import Brush2 from "../drawings/Brush2";

const Artwork = () => {
    const [artworkState, setArtworkState] = useState(0);
    const { inventory, setInventory } = useInventoryContext([]);
    const [board, setBoard] = useState([]);
    const containerRef = useRef();
    const containerFinalRef = useRef();

    const handleStart = () => {
        setArtworkState(artworkState + 1);
    };

    const handleEnd = () => {
        html2canvas(containerRef.current).then(async function (canvas) {
            containerFinalRef.current.appendChild(canvas);
            let res = await axios.post("/api/artwork", { image_url: canvas.toDataURL() });
        });

        setArtworkState(artworkState + 1);
    };

    const handleUse = (e) => {
        console.log(e.target);

        setBoard([...board, inventory[e.target.id]]);
        setInventory((prevState) => prevState.filter((_, i) => i != e.target.id));
    };

    switch (artworkState) {
        case 2:
            return (
                <Container>
                    <Grid layout="end">
                        <Item name="header">
                            <Header />
                        </Item>
                        <Item name="postit">
                            <PostIt rotation={-5}>Ton dessin est terminé !</PostIt>
                        </Item>
                        <Item name="board">
                            <BoardContainer>
                                <Board ref={containerFinalRef} />
                                <svg
                                    width="336"
                                    height="265"
                                    viewBox="0 0 336 265"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                    preserveAspectRatio="none"
                                >
                                    <path
                                        d="M76.5065 6.81524C80.1048 6.81524 83.6622 7.02199 87.281 6.88415C91.605 6.72334 95.9291 6.33283 100.243 5.97676C103.667 5.6896 107.082 5.29906 110.465 4.93149C111.856 4.79366 113.225 4.5754 114.554 4.41459C116.916 4.12744 119.267 3.78284 121.628 3.62203C125.462 3.34636 129.295 3.10517 133.139 3.03625C136.982 2.96734 141.133 3.03624 145.119 3.19704C150.098 3.39231 155.076 4.02405 160.034 3.94365C169.183 3.80581 178.332 4.64433 187.471 3.44975C192.408 2.79502 197.427 2.9788 202.344 2.2207C206.842 1.53152 211.32 2.0484 215.787 1.68084C216.686 1.60043 217.576 1.38222 218.465 1.34776C226.214 1.04912 233.962 0.738972 241.721 0.509245C247.354 0.33695 252.966 0.268033 258.619 0.187628C262.708 0.11871 266.797 0.0765756 270.885 0.0612605C275.864 0.0612605 280.842 -0.0765756 285.82 0.0612605C290.145 0.164638 294.479 0.394367 298.793 0.853821C304.926 1.52003 311.121 2.33558 317.346 2.59977C321.333 2.94928 325.286 3.67547 329.163 4.77067C332.772 5.62066 334.377 8.5382 334.694 12.501C334.857 14.603 335 16.705 335.113 18.8185C335.43 24.665 335.91 30.523 335.992 36.3926C336.064 41.883 335.634 47.3735 335.542 52.8755C335.42 59.5605 335.409 66.2571 335.368 72.9421C335.368 75.7678 335.491 78.5934 335.368 81.4191C335.246 84.2447 334.796 86.898 334.786 89.6318C334.786 95.9608 334.878 102.267 334.939 108.607C335.082 111.358 335.082 244.115 334.939 246.866C334.5 251.46 332.966 255.423 328.427 256.756C327.559 257.008 326.741 257.456 325.892 257.801C322.018 259.265 317.862 259.515 313.871 258.525C311.613 258.193 309.339 258.016 307.063 257.996C299.324 257.514 291.586 256.985 283.848 256.572C281.404 256.446 278.961 256.572 276.518 256.641C270.15 256.871 263.791 257.169 257.423 257.422C252.7 257.594 247.987 257.824 243.265 257.858C235.271 257.858 227.277 257.801 219.283 257.778C214.55 257.778 209.827 257.663 205.104 257.778C201.925 257.858 198.756 258.41 195.577 258.49C190.691 258.616 185.794 258.49 180.908 258.548C175.797 258.616 170.614 258.685 165.472 258.95C152.899 259.616 140.328 260.347 127.762 261.143C124.092 261.373 120.453 262.016 116.793 262.372C114.677 262.568 112.551 262.568 110.435 262.625C107.9 262.694 105.323 262.717 102.839 262.797C92.617 263.142 82.3946 263.234 72.2234 263.946C64.5259 264.474 56.8898 264.187 49.1821 264.199C47.3011 264.199 45.4304 264.509 43.5495 264.474C38.8983 264.371 34.2471 264.095 29.5959 264.026C26.8359 264.026 24.0554 264.13 21.2953 264.302C18.9237 264.44 16.5726 264.773 14.201 264.968C8.55824 265.439 5.00084 260.581 4.21371 255.067C3.80925 251.422 3.65547 247.747 3.75371 244.075C3.65148 235.54 3.52881 97.006 3.60037 88.4831C3.67193 80.9251 2.75191 73.459 2.24079 65.9584C1.91367 61.0193 1.99546 56.0457 1.71945 51.1066C1.36167 44.6972 0.809655 38.2993 0.390537 31.8899C0.196311 28.7771 -0.0592518 25.6528 0.0123051 22.54C0.0940843 18.6577 3.39592 13.9712 6.82043 13.0064C9.90735 12.1322 13.0473 11.5141 16.2148 11.1571C24.1883 10.2956 32.172 9.59493 40.1557 8.92872C48.3336 8.23954 56.6137 7.56186 64.853 7.07943C68.6762 6.86119 72.53 7.07943 76.3736 7.14835L76.5065 6.81524ZM6.77954 100.797H7.16799C7.16799 107.309 7.05554 243.834 7.0351 250.323C7.02961 251.795 7.12187 253.266 7.3111 254.723C7.92444 259.248 10.2552 261.614 14.3032 261.534C16.4269 261.459 18.544 261.228 20.6411 260.845C24.6852 260.142 28.7967 260.077 32.8569 260.65C35.5367 261.004 38.2346 261.157 40.9326 261.109C47.802 261.109 54.6715 261.109 61.5307 260.96C69.0442 260.776 76.5679 260.385 84.0813 260.121C89.1414 259.949 94.2117 259.799 99.2821 259.731C104.587 259.662 109.913 259.891 115.209 259.65C121.424 259.386 127.608 258.502 133.813 258.352C145.518 258.191 157.151 256.928 168.835 256.377C175.93 256.043 183.034 255.929 190.149 255.71C191.365 255.71 192.602 255.71 193.819 255.653C202.794 255.125 211.769 254.677 220.765 254.814C232.275 254.987 243.796 254.677 255.317 254.504C260.704 254.424 266.101 254.194 271.489 254.033C274.75 253.93 278.021 253.7 281.282 253.781C286.832 253.93 292.373 254.275 297.924 254.55C299.467 254.631 300.991 254.791 302.565 254.918C307.533 255.297 312.521 255.527 317.469 256.066C321.474 256.495 325.507 255.673 329.123 253.689C329.95 253.259 330.661 252.588 331.181 251.746C331.7 250.904 332.009 249.921 332.077 248.899C332.295 246.991 332.278 245.058 332.026 243.156C331.003 236.264 331.903 99.3722 331.474 92.5493C331.397 91.6363 331.397 90.7171 331.474 89.8041C332.311 82.4233 332.537 74.9712 332.148 67.5435C332.152 66.9941 332.186 66.4456 332.251 65.901C332.394 63.2362 332.588 60.5943 332.659 57.9295C332.792 53.2545 332.854 48.5681 332.946 43.8817C333.017 40.2175 333.15 36.5534 333.16 32.8892C333.209 32.0844 332.979 31.2897 332.516 30.6724C331.024 29.3515 331.044 27.7549 331.412 25.963C332.191 21.2592 332.229 16.4385 331.525 11.7199C331.473 11.0292 331.277 10.3621 330.952 9.77312C330.627 9.18415 330.182 8.69009 329.654 8.33144C326.387 6.20638 322.703 5.02257 318.931 4.88554C316.426 4.71324 313.891 4.88552 311.397 4.6558C305.938 4.1504 300.51 3.40381 295.041 2.88693C283.214 1.73829 271.366 2.46194 259.528 2.46194C249.654 2.46194 239.779 2.71461 229.883 2.89839C224.496 3.01325 219.109 3.23151 213.722 3.41529C213.314 3.436 212.908 3.48588 212.505 3.56462C211.054 3.79434 209.612 4.13894 208.161 4.2538C202.13 4.73623 196.098 5.21864 190.057 5.56323C183.545 5.94228 177.085 7.0909 170.491 6.41321C165.799 5.93078 161.036 6.41321 156.292 6.34429C148.871 6.22943 141.439 5.86187 134.008 5.88484C127.965 5.77712 121.921 6.03785 115.904 6.66591C102.615 8.36589 89.3254 10.0429 75.8319 9.95102C67.2553 9.95102 58.6684 10.2497 50.1021 10.6287C43.6517 10.9159 37.2116 11.5247 30.7817 12.0415C27.3572 12.3172 23.9327 12.5699 20.5593 13.0523C16.9202 13.5692 13.2708 14.1321 9.69292 15.051C7.8746 15.5423 6.25443 16.7019 5.08954 18.3459C3.92466 19.9898 3.28181 22.0239 3.26303 24.1252C3.26303 27.2494 3.54926 30.3623 3.75371 33.4751C4.1626 39.7007 4.64305 45.9262 5.02128 52.1518C5.41996 58.5612 5.70618 64.9821 6.10486 71.403C6.3093 74.6076 6.8511 77.7894 6.89198 80.9941C6.98399 87.5757 6.83065 94.1919 6.77954 100.797Z"
                                        fill="black"
                                    />
                                </svg>
                            </BoardContainer>
                        </Item>
                        <Item name="button">
                            <Link href="/conclusion">
                                <Button arrow="right">Suivant</Button>
                            </Link>
                        </Item>
                    </Grid>
                </Container>
            );
        case 1:
            return (
                <Container>
                    <Grid layout="progress">
                        <Item name="header">
                            <Header />
                        </Item>
                        <Item name="postit">
                            <PostIt>Fais glisser les éléments sur la feuille pour créer ton œuvre.</PostIt>
                        </Item>
                        <Item name="board">
                            <BoardContainer>
                                <Board ref={containerRef}>
                                    {board.map((item, key) => (
                                        <Drawing
                                            scale="6"
                                            key={key}
                                            drag
                                            dragConstraints={containerRef}
                                            dragMomentum={false}
                                        >
                                            <DrawingSelector drawing={item} />
                                        </Drawing>
                                    ))}
                                </Board>
                                <svg
                                    width="336"
                                    height="265"
                                    viewBox="0 0 336 265"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                    preserveAspectRatio="none"
                                >
                                    <path
                                        d="M76.5065 6.81524C80.1048 6.81524 83.6622 7.02199 87.281 6.88415C91.605 6.72334 95.9291 6.33283 100.243 5.97676C103.667 5.6896 107.082 5.29906 110.465 4.93149C111.856 4.79366 113.225 4.5754 114.554 4.41459C116.916 4.12744 119.267 3.78284 121.628 3.62203C125.462 3.34636 129.295 3.10517 133.139 3.03625C136.982 2.96734 141.133 3.03624 145.119 3.19704C150.098 3.39231 155.076 4.02405 160.034 3.94365C169.183 3.80581 178.332 4.64433 187.471 3.44975C192.408 2.79502 197.427 2.9788 202.344 2.2207C206.842 1.53152 211.32 2.0484 215.787 1.68084C216.686 1.60043 217.576 1.38222 218.465 1.34776C226.214 1.04912 233.962 0.738972 241.721 0.509245C247.354 0.33695 252.966 0.268033 258.619 0.187628C262.708 0.11871 266.797 0.0765756 270.885 0.0612605C275.864 0.0612605 280.842 -0.0765756 285.82 0.0612605C290.145 0.164638 294.479 0.394367 298.793 0.853821C304.926 1.52003 311.121 2.33558 317.346 2.59977C321.333 2.94928 325.286 3.67547 329.163 4.77067C332.772 5.62066 334.377 8.5382 334.694 12.501C334.857 14.603 335 16.705 335.113 18.8185C335.43 24.665 335.91 30.523 335.992 36.3926C336.064 41.883 335.634 47.3735 335.542 52.8755C335.42 59.5605 335.409 66.2571 335.368 72.9421C335.368 75.7678 335.491 78.5934 335.368 81.4191C335.246 84.2447 334.796 86.898 334.786 89.6318C334.786 95.9608 334.878 102.267 334.939 108.607C335.082 111.358 335.082 244.115 334.939 246.866C334.5 251.46 332.966 255.423 328.427 256.756C327.559 257.008 326.741 257.456 325.892 257.801C322.018 259.265 317.862 259.515 313.871 258.525C311.613 258.193 309.339 258.016 307.063 257.996C299.324 257.514 291.586 256.985 283.848 256.572C281.404 256.446 278.961 256.572 276.518 256.641C270.15 256.871 263.791 257.169 257.423 257.422C252.7 257.594 247.987 257.824 243.265 257.858C235.271 257.858 227.277 257.801 219.283 257.778C214.55 257.778 209.827 257.663 205.104 257.778C201.925 257.858 198.756 258.41 195.577 258.49C190.691 258.616 185.794 258.49 180.908 258.548C175.797 258.616 170.614 258.685 165.472 258.95C152.899 259.616 140.328 260.347 127.762 261.143C124.092 261.373 120.453 262.016 116.793 262.372C114.677 262.568 112.551 262.568 110.435 262.625C107.9 262.694 105.323 262.717 102.839 262.797C92.617 263.142 82.3946 263.234 72.2234 263.946C64.5259 264.474 56.8898 264.187 49.1821 264.199C47.3011 264.199 45.4304 264.509 43.5495 264.474C38.8983 264.371 34.2471 264.095 29.5959 264.026C26.8359 264.026 24.0554 264.13 21.2953 264.302C18.9237 264.44 16.5726 264.773 14.201 264.968C8.55824 265.439 5.00084 260.581 4.21371 255.067C3.80925 251.422 3.65547 247.747 3.75371 244.075C3.65148 235.54 3.52881 97.006 3.60037 88.4831C3.67193 80.9251 2.75191 73.459 2.24079 65.9584C1.91367 61.0193 1.99546 56.0457 1.71945 51.1066C1.36167 44.6972 0.809655 38.2993 0.390537 31.8899C0.196311 28.7771 -0.0592518 25.6528 0.0123051 22.54C0.0940843 18.6577 3.39592 13.9712 6.82043 13.0064C9.90735 12.1322 13.0473 11.5141 16.2148 11.1571C24.1883 10.2956 32.172 9.59493 40.1557 8.92872C48.3336 8.23954 56.6137 7.56186 64.853 7.07943C68.6762 6.86119 72.53 7.07943 76.3736 7.14835L76.5065 6.81524ZM6.77954 100.797H7.16799C7.16799 107.309 7.05554 243.834 7.0351 250.323C7.02961 251.795 7.12187 253.266 7.3111 254.723C7.92444 259.248 10.2552 261.614 14.3032 261.534C16.4269 261.459 18.544 261.228 20.6411 260.845C24.6852 260.142 28.7967 260.077 32.8569 260.65C35.5367 261.004 38.2346 261.157 40.9326 261.109C47.802 261.109 54.6715 261.109 61.5307 260.96C69.0442 260.776 76.5679 260.385 84.0813 260.121C89.1414 259.949 94.2117 259.799 99.2821 259.731C104.587 259.662 109.913 259.891 115.209 259.65C121.424 259.386 127.608 258.502 133.813 258.352C145.518 258.191 157.151 256.928 168.835 256.377C175.93 256.043 183.034 255.929 190.149 255.71C191.365 255.71 192.602 255.71 193.819 255.653C202.794 255.125 211.769 254.677 220.765 254.814C232.275 254.987 243.796 254.677 255.317 254.504C260.704 254.424 266.101 254.194 271.489 254.033C274.75 253.93 278.021 253.7 281.282 253.781C286.832 253.93 292.373 254.275 297.924 254.55C299.467 254.631 300.991 254.791 302.565 254.918C307.533 255.297 312.521 255.527 317.469 256.066C321.474 256.495 325.507 255.673 329.123 253.689C329.95 253.259 330.661 252.588 331.181 251.746C331.7 250.904 332.009 249.921 332.077 248.899C332.295 246.991 332.278 245.058 332.026 243.156C331.003 236.264 331.903 99.3722 331.474 92.5493C331.397 91.6363 331.397 90.7171 331.474 89.8041C332.311 82.4233 332.537 74.9712 332.148 67.5435C332.152 66.9941 332.186 66.4456 332.251 65.901C332.394 63.2362 332.588 60.5943 332.659 57.9295C332.792 53.2545 332.854 48.5681 332.946 43.8817C333.017 40.2175 333.15 36.5534 333.16 32.8892C333.209 32.0844 332.979 31.2897 332.516 30.6724C331.024 29.3515 331.044 27.7549 331.412 25.963C332.191 21.2592 332.229 16.4385 331.525 11.7199C331.473 11.0292 331.277 10.3621 330.952 9.77312C330.627 9.18415 330.182 8.69009 329.654 8.33144C326.387 6.20638 322.703 5.02257 318.931 4.88554C316.426 4.71324 313.891 4.88552 311.397 4.6558C305.938 4.1504 300.51 3.40381 295.041 2.88693C283.214 1.73829 271.366 2.46194 259.528 2.46194C249.654 2.46194 239.779 2.71461 229.883 2.89839C224.496 3.01325 219.109 3.23151 213.722 3.41529C213.314 3.436 212.908 3.48588 212.505 3.56462C211.054 3.79434 209.612 4.13894 208.161 4.2538C202.13 4.73623 196.098 5.21864 190.057 5.56323C183.545 5.94228 177.085 7.0909 170.491 6.41321C165.799 5.93078 161.036 6.41321 156.292 6.34429C148.871 6.22943 141.439 5.86187 134.008 5.88484C127.965 5.77712 121.921 6.03785 115.904 6.66591C102.615 8.36589 89.3254 10.0429 75.8319 9.95102C67.2553 9.95102 58.6684 10.2497 50.1021 10.6287C43.6517 10.9159 37.2116 11.5247 30.7817 12.0415C27.3572 12.3172 23.9327 12.5699 20.5593 13.0523C16.9202 13.5692 13.2708 14.1321 9.69292 15.051C7.8746 15.5423 6.25443 16.7019 5.08954 18.3459C3.92466 19.9898 3.28181 22.0239 3.26303 24.1252C3.26303 27.2494 3.54926 30.3623 3.75371 33.4751C4.1626 39.7007 4.64305 45.9262 5.02128 52.1518C5.41996 58.5612 5.70618 64.9821 6.10486 71.403C6.3093 74.6076 6.8511 77.7894 6.89198 80.9941C6.98399 87.5757 6.83065 94.1919 6.77954 100.797Z"
                                        fill="black"
                                    />
                                </svg>
                            </BoardContainer>
                            <InventoryContainer>
                                <Inventory>
                                    {inventory.map((item, key) => (
                                        <Drawing scale="4" onClick={handleUse} id={key} key={key}>
                                            <DrawingSelector drawing={item} />
                                        </Drawing>
                                    ))}
                                </Inventory>
                                <svg
                                    width="336"
                                    height="125"
                                    viewBox="0 0 336 125"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                    preserveAspectRatio="none"
                                >
                                    <path
                                        d="M76.5065 3.21473C80.1048 3.21473 83.6622 3.31226 87.281 3.24724C91.605 3.17139 95.9291 2.98718 100.243 2.81922C103.667 2.68377 107.082 2.49956 110.465 2.32618C111.856 2.26116 113.225 2.15821 114.554 2.08236C116.916 1.9469 119.267 1.78436 121.628 1.70851C125.462 1.57847 129.295 1.4647 133.139 1.4322C136.982 1.39969 141.133 1.43219 145.119 1.50804C150.098 1.60015 155.076 1.89814 160.034 1.86021C169.183 1.7952 178.332 2.19072 187.471 1.62724C192.408 1.31841 197.427 1.40509 202.344 1.0475C206.842 0.722414 211.32 0.966227 215.787 0.792849C216.686 0.754922 217.576 0.65199 218.465 0.635736C226.214 0.494866 233.962 0.348572 241.721 0.24021C247.354 0.158938 252.966 0.126431 258.619 0.088504C262.708 0.0559955 266.797 0.0361206 270.886 0.0288965C275.864 0.0288965 280.842 -0.0361206 285.82 0.0288965C290.145 0.0776592 294.479 0.186022 298.793 0.402746C304.926 0.716995 311.121 1.10169 317.346 1.22631C321.333 1.39117 325.286 1.73371 329.163 2.25032C332.772 2.65125 334.377 4.02745 334.694 5.89669C334.857 6.8882 335 7.87971 335.113 8.87664C335.43 11.6344 335.91 14.3977 335.992 17.1663C336.064 19.7562 335.634 22.346 335.542 24.9413C335.42 28.0946 335.409 31.2533 335.368 34.4067C335.368 35.7395 335.491 37.0724 335.368 38.4052C335.246 39.7381 334.796 40.9896 334.786 42.2791C334.786 45.2645 334.878 48.239 334.939 51.2298C335.082 52.5272 335.082 115.149 334.939 116.446C334.5 118.613 332.966 120.483 328.427 121.111C327.559 121.23 326.741 121.442 325.892 121.604C322.018 122.295 317.862 122.413 313.871 121.946C311.613 121.789 309.339 121.706 307.063 121.696C299.324 121.469 291.586 121.22 283.848 121.024C281.404 120.965 278.961 121.024 276.518 121.057C270.15 121.165 263.791 121.306 257.423 121.425C252.7 121.507 247.987 121.615 243.265 121.631C235.271 121.631 227.277 121.604 219.283 121.593C214.55 121.593 209.827 121.539 205.104 121.593C201.925 121.631 198.756 121.891 195.577 121.929C190.691 121.989 185.794 121.929 180.908 121.956C175.797 121.989 170.614 122.021 165.472 122.146C152.899 122.46 140.328 122.805 127.762 123.181C124.092 123.289 120.453 123.593 116.793 123.761C114.677 123.853 112.551 123.853 110.435 123.88C107.9 123.912 105.324 123.923 102.839 123.961C92.6171 124.124 82.3947 124.167 72.2234 124.503C64.5259 124.752 56.8898 124.617 49.1821 124.622C47.3011 124.622 45.4304 124.768 43.5495 124.752C38.8983 124.703 34.2471 124.573 29.5959 124.541C26.8359 124.541 24.0554 124.59 21.2953 124.671C18.9237 124.736 16.5726 124.893 14.201 124.985C8.55824 125.207 5.00084 122.915 4.21371 120.315C3.80925 118.595 3.65547 116.862 3.75371 115.13C3.65148 111.104 3.52881 45.7576 3.60037 41.7373C3.67193 38.1722 2.75191 34.6505 2.24079 31.1125C1.91367 28.7827 1.99546 26.4366 1.71945 24.1069C1.36167 21.0836 0.809655 18.0657 0.390537 15.0424C0.196311 13.5741 -0.0592518 12.1004 0.0123051 10.6321C0.0940843 8.80078 3.39592 6.59021 6.82043 6.13509C9.90735 5.72275 13.0473 5.43119 16.2148 5.26277C24.1883 4.85641 32.172 4.52591 40.1557 4.21166C48.3336 3.88657 56.6138 3.56692 64.853 3.33936C68.6762 3.23641 72.53 3.33935 76.3737 3.37186L76.5065 3.21473ZM6.77954 47.5455H7.16799C7.16799 50.6176 7.05554 115.016 7.0351 118.077C7.02962 118.771 7.12187 119.465 7.3111 120.152C7.92444 122.287 10.2552 123.403 14.3032 123.365C16.4269 123.33 18.544 123.221 20.6411 123.04C24.6852 122.709 28.7967 122.678 32.8569 122.948C35.5368 123.115 38.2346 123.187 40.9326 123.165C47.802 123.165 54.6715 123.165 61.5307 123.094C69.0442 123.007 76.5679 122.823 84.0813 122.699C89.1414 122.617 94.2118 122.547 99.2821 122.514C104.587 122.482 109.913 122.59 115.209 122.477C121.424 122.352 127.608 121.935 133.813 121.864C145.518 121.788 157.151 121.192 168.835 120.932C175.93 120.775 183.034 120.721 190.149 120.618C191.365 120.618 192.602 120.618 193.819 120.591C202.794 120.342 211.769 120.13 220.765 120.195C232.276 120.277 243.796 120.13 255.317 120.049C260.704 120.011 266.101 119.903 271.489 119.827C274.75 119.778 278.021 119.67 281.282 119.708C286.833 119.778 292.373 119.941 297.924 120.071C299.467 120.109 300.991 120.185 302.565 120.244C307.533 120.423 312.521 120.531 317.469 120.786C321.474 120.988 325.507 120.6 329.123 119.665C329.951 119.462 330.661 119.145 331.181 118.748C331.7 118.351 332.009 117.887 332.077 117.405C332.295 116.505 332.278 115.594 332.026 114.696C331.004 111.445 331.903 46.8737 331.474 43.6553C331.397 43.2247 331.397 42.7911 331.474 42.3604C332.311 38.8789 332.537 35.3638 332.148 31.8602C332.152 31.601 332.186 31.3422 332.251 31.0854C332.394 29.8284 332.588 28.5822 332.659 27.3252C332.792 25.1201 332.854 22.9095 332.946 20.6989C333.017 18.9705 333.15 17.2422 333.16 15.5138C333.21 15.1342 332.979 14.7593 332.516 14.4681C331.024 13.845 331.044 13.0919 331.412 12.2467C332.191 10.0279 332.229 7.754 331.525 5.52827C331.473 5.20248 331.277 4.88778 330.952 4.60996C330.627 4.33215 330.182 4.0991 329.654 3.92993C326.387 2.92754 322.704 2.36914 318.931 2.3045C316.426 2.22323 313.891 2.30449 311.397 2.19613C305.938 1.95774 300.51 1.60557 295.041 1.36176C283.214 0.819949 271.366 1.16129 259.528 1.16129C249.654 1.16129 239.779 1.28048 229.883 1.36716C224.496 1.42135 219.109 1.5243 213.722 1.61098C213.314 1.62076 212.908 1.64428 212.505 1.68142C211.054 1.78978 209.612 1.95233 208.161 2.00651C202.13 2.23407 196.098 2.46162 190.057 2.62416C183.545 2.80296 177.085 3.34476 170.491 3.0251C165.799 2.79754 161.036 3.0251 156.292 2.99259C148.871 2.93841 141.439 2.76503 134.008 2.77587C127.965 2.72505 121.921 2.84804 115.904 3.1443C102.615 3.94617 89.3254 4.73722 75.8319 4.69388C67.2553 4.69388 58.6685 4.83475 50.1021 5.01354C43.6517 5.14899 37.2116 5.43616 30.7817 5.67997C27.3572 5.81001 23.9327 5.92919 20.5593 6.15675C16.9202 6.40056 13.2708 6.66606 9.69292 7.09951C7.8746 7.33127 6.25443 7.87827 5.08954 8.65372C3.92466 9.42917 3.28181 10.3886 3.26303 11.3798C3.26303 12.8535 3.54926 14.3218 3.75371 15.7901C4.1626 18.7267 4.64305 21.6633 5.02128 24.5999C5.41996 27.6232 5.70618 30.6519 6.10486 33.6806C6.3093 35.1923 6.8511 36.6931 6.89199 38.2047C6.98399 41.3093 6.83065 44.4301 6.77954 47.5455Z"
                                        fill="black"
                                    />
                                </svg>
                            </InventoryContainer>
                        </Item>
                        <Item name="button">
                            <Button onClick={handleEnd}>J’ai terminé</Button>
                        </Item>
                    </Grid>
                </Container>
            );
        default:
            return (
                <Container>
                    <Grid layout="start">
                        <Item name="header">
                            <Header />
                        </Item>
                        <Item name="postit">
                            <PostIt>Chouette ! Tu as récupéré tous les éléments pour créer ton oeuvre.</PostIt>
                        </Item>
                        <Item name="button">
                            <Button onClick={handleStart}>Je crée mon oeuvre</Button>
                        </Item>
                    </Grid>
                    <Tube2 top="-5" left="25" />
                    <Scheme top="20" right="-10" />
                    <Pencil2 bottom="30" right="10" />
                    <Tube bottom="0" right="0" />
                    <Brush2 bottom="3" left="0" />
                </Container>
            );
    }
};

export default Artwork;

const Grid = styled.div`
    display: grid;
    width: 100%;
    height: 100%;
    text-align: center;
    grid-template-columns: 1fr;
    ${(props) => {
        switch (props.layout) {
            case "end":
                return css`
                    grid-template-rows: min-content 10vh 1fr 20vh;
                    grid-template-areas:
                        "header"
                        "postit"
                        "board"
                        "button";
                `;
            case "progress":
                return css`
                    grid-template-rows: min-content 10vh 1fr 20vh;
                    grid-template-areas:
                        "header"
                        "postit"
                        "board"
                        "button";
                `;
            default:
                return css`
                    grid-template-rows: min-content 1fr 1fr 20vh;
                    grid-template-areas:
                        "header"
                        "postit"
                        "postit"
                        "button";
                `;
        }
    }}
`;

const Item = styled.div`
    grid-area: ${(props) => props.name};
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 3rem;
`;

const BoardContainer = styled.div`
    position: relative;
    width: 90%;
    height: 50%;

    svg {
        position: absolute;
        inset: -4px;
        width: calc(100% + 8px);
        height: calc(100% + 8px);
        pointer-events: none;
        user-select: none;
    }
`;

const Board = styled.div`
    position: relative;
    width: 100%;
    height: 100%;
    /* border: 2px #1a1a1a solid;
    border-radius: 4px; */

    div {
        position: absolute;
        display: inline-block;
        top: 40%;
        left: 40%;
    }
`;

const InventoryContainer = styled.div`
    position: relative;
    width: 400px;
    max-width: 80%;

    svg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        user-select: none;
    }
`;

const Inventory = styled.div`
    gap: 1rem;
    width: 100%;
    max-width: 100%;
    min-height: 4rem;
    padding: 1rem;
    overflow-x: scroll;
    white-space: nowrap;

    div {
        margin: 0 0.5rem;
    }
`;

const Drawing = styled(motion.div)`
    position: relative;
    display: inline-block;
    height: ${(props) => props.scale || 8}rem;
    width: ${(props) => props.scale || 8}rem;

    svg {
        position: absolute;
        left: 0;
        top: 0;
        max-height: 100%;
        max-width: 100%;
        pointer-events: none;
    }
`;
